(B) Add settings JSON export: encode current AppSettings via JSONEncoder; present NSSavePanel defaulting to filename `lockout-settings.json`; write data to selected URL +feature +configurable
(B) Add settings JSON import: present NSOpenPanel filtering .json; decode with JSONDecoder into AppSettings; show NSAlert listing changed keys; on confirm apply and call `scheduler.reschedule()` +feature +configurable
(B) Add "Take Break Now" NSMenuItem in MenuBarController status menu with submenu listing each enabled CustomBreakType by name; selection calls `scheduler.triggerBreak(type:)` +feature +ux
(B) Add "Next break in X:XX" NSMenuItem in MenuBarController status menu updated every tick by `tickTimer` alongside the existing icon countdown badge +ux
(B) Add break reminder UNNotificationContent with action buttons: "Start Break Now" (foreground) and "Snooze" (background, uses breakType.snoozeMinutes); handle in UNUserNotificationCenterDelegate.didReceive +feature +ux
(B) Add `notificationLeadMinutes: Int` (default 1, range 0â€“5) to AppSettings; schedule `UNTimeIntervalNotificationTrigger` for `intervalSeconds - leadMinutes*60` before each break; expose stepper in SettingsView +feature +configurable
(B) Schedule weekly compliance summary notification: every Monday 09:00 local time via `UNCalendarNotificationTrigger`; body contains last 7 days compliance % from `repository.dailyStats()` +feature
(B) Add `weeklyNotificationEnabled: Bool` to AppSettings (default false); expose toggle in SettingsView; schedule or cancel Monday notification on toggle change +feature +configurable
(B) Add per-break-type exercise tips: `tips: [String]` field in CustomBreakType editable in CustomBreakTypeEditorView; cycle tips every 5s in BreakOverlayView using a local Timer +feature
(B) Add overlay background color per CustomBreakType: store as hex string in `overlayColorHex`; add `Color(hex:)` extension; apply in BreakOverlayView root ZStack background +feature +configurable
(B) Add overlay blur per CustomBreakType: store `overlayBlurMaterial: String` (ultraThin/thin/medium/hudWindow); apply as NSVisualEffectView in BreakOverlayWindowController +feature +configurable
(B) Bundle three audio assets (chime.aiff, bell.aiff, silence placeholder) in LockOut-macOS/Resources; play selected sound via AVAudioPlayer in BreakOverlayWindowController.show() respecting system mute state +feature +configurable
(B) Add global snooze hotkey: store `globalSnoozeHotkey: HotkeyDescriptor?` (keyCode: Int, modifierFlags: Int, Codable) in AppSettings; register/unregister CGEventTap in AppDelegate on settings change; calls `scheduler.snooze()` +feature +configurable
(B) Add hotkey recorder control in SettingsView that captures next keypress as `HotkeyDescriptor` and writes to `settings.globalSnoozeHotkey` +feature +configurable
(B) Add `historyRetentionDays: Int` (options 30/60/90/365/0=unlimited) to AppSettings; pass to `repository.pruneOldRecords(olderThan:)` at launch and in the midnight timer +feature +configurable
(B) Add "Retention Period" picker in SettingsView with values "30 days / 60 days / 90 days / 1 year / Unlimited" bound to `settings.historyRetentionDays` +feature +configurable
(B) Add JSON export option in StatisticsView alongside existing CSV: encode `[DailyStats]` via JSONEncoder; present NSSavePanel with .json extension +feature
(B) Add per-break-type compliance columns to CSV and JSON exports from StatisticsView (one column per CustomBreakType name) +feature
(B) Add `menuBarIconTheme: MenuBarIconTheme` (enum: monochrome, color, minimal; Codable) to AppSettings; MenuBarController applies different NSImage based on active theme +feature +configurable
(B) Add "Menu Bar Icon" picker in SettingsView with monochrome/color/minimal options bound to `settings.menuBarIconTheme` +feature +configurable
(B) Add launch-at-login toggle in SettingsView bound directly to `LaunchAtLoginService`; do not remove from onboarding but ensure both stay in sync +ux
(B) Add onboarding step before `requestAuthorization` call: show explanatory text "LockOut sends a reminder before each break" with explicit "Allow Notifications" and "Skip" buttons; only call `requestAuthorization` if Allow tapped +ux
(B) Add onboarding step for optional integrations (Calendar, Focus Mode): show toggle list; request EKEventStore or DND access only for enabled items; write results to AppSettings +ux
(B) Add `AppVersion` struct to LockOutCore with static `current: String` read from `Bundle.main.infoDictionary["CFBundleShortVersionString"]`; display in SettingsView footer and "About LockOut vX.Y.Z" NSMenuItem +ux
(B) Add XCUITest target `LockOut-macOSUITests` in project.yml with host application set to LockOut-macOS +test +infra
(B) Handle `--uitesting` launch argument in AppDelegate: use `ModelConfiguration(isStoredInMemoryOnly: true)` to isolate SwiftData state during UI test runs +test +infra
(B) Add XCTest for CloudKitSyncService conflict resolution: construct two BreakSessionRecord with same UUID, statuses completed vs skipped; assert `resolveConflict` returns completed record +test
(B) Add XCTest for offline upload queue: force NetworkMonitor offline; call `cloudSync.uploadSession(record)`; assert pendingUploads.count == 1; restore online; flush; assert count == 0 +test
(B) Add XCTest for custom break type scheduling: init BreakScheduler with AppSettings.customBreakTypes containing two enabled entries; call `start()`; assert timers.count == 2 +test
(B) Add XCTest for blocklist auto-complete: init overlay controller with blocklist containing "com.test.app"; call `shouldShow(frontmostBundleID: "com.test.app")`; assert returns false +test
(B) Add XCTest for settings import/export round-trip: encode AppSettings with non-default customBreakTypes to JSON; decode; assert decoded == original +test
(B) Add XCTest for minDisplaySeconds enforcement: show overlay with minDisplaySeconds = 10; assert skip button disabled at t=0 and enabled at t=11 +test
(B) Add XCTest for idle-pause: set idleThresholdMinutes = 1; inject idle seconds = 61; call idle check handler; assert scheduler.isPaused == true +test
